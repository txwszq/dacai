package com.dacai

import com.HttpUtil
import com.SerializeUtil
import com.params.ParamsStrategiesContext
import com.website.Discuz
import grails.transaction.Transactional
import org.apache.commons.httpclient.HttpState
import org.apache.commons.httpclient.methods.GetMethod
import org.apache.commons.lang.StringUtils
import org.apache.http.message.BasicNameValuePair
import org.apache.commons.httpclient.HttpClient;

@Transactional
class DiscuzService {


    def login(Discuz discuz) {
        log.info("start login ${discuz.url}")
        ParamsStrategiesContext context = new ParamsStrategiesContext()
        def params = context.getLoginParams(discuz.url, discuz.username, discuz.password)
        def cookieStore = HttpUtil.post("${discuz.url}/member.php?mod=logging&action=login&loginsubmit=yes&infloat=yes&lssubmit=yes&inajax=1",params, null)
        SerializeUtil.writeCookies(discuz.url, discuz.username, cookieStore)
        log.info("finish login")
    }

    def checkLogin(Discuz discuz) {
        log.info("check login:${discuz.url}")
        def cookieStore = SerializeUtil.readCookies(discuz.url, discuz.username)
        if (HttpUtil.get(discuz.url, cookieStore).indexOf("退出") < 0) {
            log.info("login failed ${discuz.url}")
            login(discuz)
        } else {
            log.info("login success ${discuz.url}")
        }
    }


    def sendMsg(Discuz discuz, def targetId) {
        def msg = "你好";
        checkLogin(discuz)
        def cookieStore = SerializeUtil.readCookies(discuz.url, discuz.username)
        if (!targetId) {
            targetId = discuz.currentId.toString()
        }
        def context = new ParamsStrategiesContext()
        def params = context.getLeaveMsgParams(msg, targetId, getFormHash(discuz))
        HttpUtil.post("${discuz.url}/home.php?mod=spacecp&ac=comment&inajax=1", params, cookieStore)
        discuz.currentId--
        discuz.save()
    }

    def sign(Discuz discuz) {
        checkLogin(discuz)
        def cookieStore = SerializeUtil.readCookies(discuz.url, discuz.username)
        def context = new ParamsStrategiesContext()
        def params = context.getSignParams(getFormHash(discuz))
        HttpUtil.post("${discuz.url}/plugin.php?id=dsu_paulsign:sign&operation=qiandao&infloat=1&sign_as=1&inajax=1", params, cookieStore)
    }

    def getFormHash(Discuz discuz) {
        checkLogin(discuz)
        def cookieStore = SerializeUtil.readCookies(discuz.url, discuz.username)
        def responseString = HttpUtil.get(discuz.url, cookieStore)
        return responseString.split("formhash=")[1].substring(0, 8)
    }

    def getUid(Discuz discuz) {
        checkLogin(discuz)
        def cookieStore = SerializeUtil.readCookies(discuz.url, discuz.username)
        def responseString = HttpUtil.get(discuz.url, cookieStore)
        def uid = StringUtils.substringBefore(responseString.split("discuz_uid = '")[1],"'")
        if (!discuz.maxId) {
            discuz.maxId = uid.toInteger()
            discuz.currentId = uid.toInteger() - 1
            discuz.save()
        }
        return uid
    }

    def shouting(Discuz discuz) {
        //
        checkLogin(discuz)
        def cookieStore = SerializeUtil.readCookies(discuz.url, discuz.username)
        def formHash = getFormHash(discuz)
        def responseString = HttpUtil.get("${discuz.url}/home.php?mod=spacecp&ac=follow&op=add&hash=${formHash}&fuid=${discuz.currentId}&infloat=yes&handlekey=followmod&inajax=1&ajaxtarget=fwin_content_followmod", cookieStore)
        if(responseString.indexOf("成功收听") < 0) {
            println discuz.url
            println responseString
        }
        discuz.currentId--
        discuz.save(flush:true)

    }

    def uploadImg(Discuz discuz) {
        checkLogin(discuz)
        def cookieStore = SerializeUtil.readCookies(discuz.url, discuz.username)
        def responseString = HttpUtil.get("${discuz.url}/home.php?mod=spacecp&ac=avatar", cookieStore)

        def url = StringUtils.substringBefore(responseString.split("'src','")[1],"'").replace("/images/camera.swf?", "/index.php?m=user&a=rectavatar&")

        List params = new ArrayList();
        params.add(new BasicNameValuePair("urlReaderTS", new Date().getTime().toString()));
        params.add(new BasicNameValuePair("avatar3", "FFD8FFE000104A46494600010100000100010000FFDB0084000503040404030504040405050506070C08070707070F0B0B090C110F1212110F111113161C1713141A1511111821181A1D1D1F1F1F13172224221E241C1E1F1E010505050706070E08080E1E1411141E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1EFFC00011080030003003011100021101031101FFC401A20000010501010101010100000000000000000102030405060708090A0B100002010303020403050504040000017D01020300041105122131410613516107227114328191A1082342B1C11552D1F02433627282090A161718191A25262728292A3435363738393A434445464748494A535455565758595A636465666768696A737475767778797A838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE1E2E3E4E5E6E7E8E9EAF1F2F3F4F5F6F7F8F9FA0100030101010101010101010000000000000102030405060708090A0B1100020102040403040705040400010277000102031104052131061241510761711322328108144291A1B1C109233352F0156272D10A162434E125F11718191A262728292A35363738393A434445464748494A535455565758595A636465666768696A737475767778797A82838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE2E3E4E5E6E7E8E9EAF2F3F4F5F6F7F8F9FAFFDA000C03010002110311003F00C9F85FE0E51E1A92F64405E680E091EA08AE19CEF23D3846D1B1D3FC3AB8B4D36DA54BDBD821F31DA61BDC2E01623BFF00BB52D5C4E491D7378B3C38AEB08D62CA4958E022CA0934B9190E6993EA7A8D859D93DDDC4AB1C4AA58B31C003D69A42BF73E61FDA0759D235EFB1DD69BE6B98E56532188AA1047627E82BAE845C5B30A93E63CAA16C0F6AE932B1F707803ECEBE05B4971F2084138EF95FF00EBD79127EF1EAA5A1E27A95FD8E8BFE92BE1E9750605A1325D31D8583B007A73C2FB77AE88A72EB639AA2B2BD8EF7C23035CDEB5B5C683636934441DF6C33190738C1C039E39E38CD44F4EA5528F346F634FE2647AADBDA08B4BB25BC95517CB8DD942E49FBC771030319C67D2941A7B84A2F647827C758F5985B4E8AFAF67B9B690175570A15250AA180DA0700938F6FAD75D1E56DD8E69A692B9E6B1A9C62BA0CD1F617C05D5E1D43C1379A3DDB2F9F66C51973FC0C383F4EBF957955A3695D1E95295D17EDB4ADC9891194F9AAC00C75690827F56A6391D269569676771B17FD611D5BA9A996C10459D76345960B865DC9F71B8EC7BD286C151599E21FB578B04F0CE9089E5ADC35E128A3AECD8DB8FE657F4AEBC3DEECE4AD63E7E8221B7E71839AEA39CF4FF000778866D38FF006869FCDC449E5DCC19FF008F8B76FBC3FDE5EC79E3E9CF34E17D19D34E7D51EF10F8BF42BED0A1D4F4FB8570F81E5938756C70AC3B573F2B4ECCE873BA3574A73346BAA8789F20B00CD85DBF5FEB53257D074E6D193AE78A8BC525B492DA46D824625DC15473927A01C1E4FA538C2C3ABCFCB76AC7CABF13BC53278ABC50F2437124DA7DA0F26CF7646E51D5F07A163CFAE3683D2BBE9C392279F397333318622041AB24BD05CCD6B325D40CCAEA73C7B1EB49AB8D3B1D7F853C4F15B5E2CC21568DD879F0707CC1FDE5CFF10FC8FB679E79C0DE33B9EF7E1F5F0EEB5A67DAF4FB5B791C7CAC0285646F71EBF85736A99DD0AF3A6BDD387F8F36DFD95E00BCFB38F2E49F6A3B21C30424673EC781EF9ADE93BC92397115A757E267CDB63113F311C576338CD58C7EE906704F39A90352FEC64B0BEBED3DC7EFAD6E648D87BAB107F91A94C49DD18D29681D6585D82139041E86AB71A763AEF0C78AF5CD142DE5ACD95E03381F3003B1F51EDFCAB19538B67446A3B07C4CF195C788F4FB7B69A466937EF949E9803818EDD4FE54E953E57726A495AC718AA12DC007A9C7F5AD8C4B08E58138E83FFD74867FFFD9"));
        params.add(new BasicNameValuePair("avatar2", "FFD8FFE000104A46494600010100000100010000FFDB0084000503040404030504040405050506070C08070707070F0B0B090C110F1212110F111113161C1713141A1511111821181A1D1D1F1F1F13172224221E241C1E1F1E010505050706070E08080E1E1411141E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1EFFC00011080078007803011100021101031101FFC401A20000010501010101010100000000000000000102030405060708090A0B100002010303020403050504040000017D01020300041105122131410613516107227114328191A1082342B1C11552D1F02433627282090A161718191A25262728292A3435363738393A434445464748494A535455565758595A636465666768696A737475767778797A838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE1E2E3E4E5E6E7E8E9EAF1F2F3F4F5F6F7F8F9FA0100030101010101010101010000000000000102030405060708090A0B1100020102040403040705040400010277000102031104052131061241510761711322328108144291A1B1C109233352F0156272D10A162434E125F11718191A262728292A35363738393A434445464748494A535455565758595A636465666768696A737475767778797A82838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE2E3E4E5E6E7E8E9EAF2F3F4F5F6F7F8F9FAFFDA000C03010002110311003F00F08D16D0CECA8AB92CD59CDD8EAA71B9EB1E0DD084510F97AB57249DCEBB5887C4B6420F11DE226149B4DC47D08A77D09D99D37C2E7274E1131E579A99844F4AB7E545415B1763C6DC516137624C7BD221EA44E9544DC84C58A105C8A68F8AA048E5BC4B0078D940CD007CB7F182CC5A78A89030258C37EB5DB41E873D5DCE357835D0644D1B11C8EA2A5A02607F887E347403D93E1C68C2E645936F02B86ACAE77D3563DAB41D2D61B70E4718E2B066C721E31B0DDE26693073259381F811C552265DCBBE088C5B4D6ABC059ADD1FF1C60D3DC96ECCF47B42817EF014AC4F39684B127575C54F2B0E644735F40A38917F3A6A22E64470DF4721C2B0345897A92B4A36E695848A1A85FC5121DCE07AD5A436EC707E23F18E8D6CCC925D2338E30A7354A0CC5D43C03E30EA965AC6A36975699055591811EF915D5462D19CA57383F7ADC9241ED40EC488DB4E7B771401F4DFC29B3CC5B42F6FCABCCA9B9E92563D6D2D82431AE31C600ACCA385F88D3C1A7EA96B33E159A37404F6E2AE37644CF374F155D44965F674F9E18F66E1D0E09AD54523293B9B11F8B3C4F7083C88A5C9E984CD16464EE3CDD78EEF149C3C43FDA2051740AE323B0F18CB20692FCA9F4CD2E64351B9DEF85D2F6DD156EA5F31B1C9A97665246FDE5C18ADCB1352558F3BF1936A9AB27D974F9BC957387933D055A76DC892B9CD47F0EAC1630FA86AB27987AE481935A7B4D3432E43CCFE2F695A66897D69696123BBBA977DCD9C761FD6B6A326F7224923821DEB7249874CD003BA74A067D6DF0951534F8A418195E7DEBCB9EACF4D6C7A9EC0515AB16CA3CE3E3159DB5C0B66918FEEF271EB9AD60F43296E72105968F65A0D9CB2F92B2B5B338E3924608356C9689A7F897E1AB081638A27964C0F9517142849BD0C64D2DD92E91F11748D4275B7588472374466C37E440CFE144A125AB08C93D11D4437504CAB2440306A9364B537F48B7DE37639A91F2F5333C572C91A88C6403C552259E65E35F16B686AB63628AD7B229396E883D4D6D0A6E7B98D5972987AC683ACDF783E0F14BEB2CED326E3018871EA339AB718C743285494A563C97C5135CDC6A64DDCACF2C6A1307B002B7A6925A0A7ABB9915A124C3A500B41DCE01A067D5FF08A75934E813392A715E5CCF4E2B43D69CB79231D40AE75B9763CABE2ECD3359CE163625100C83D326B7822248F3D7F0C6B771A7DBC9712F9B13236C8B952DC64063E9ED5AA924C8953725B9C63E8BAAA5C5CC234E9D9BEE8DB096C367D474AE9538A4714E8CAFA9EA9ADF86F4DBDD02D97ECAA35458543346304BE0649F7CF7AC5CCBA149A96BB1D1F8234FBBFB0C11DDABAC919DADBBAB01D0FE3583DCEF924B63D234B8046B8C5652DC1C6E8C3F16DA86BB8D88CAD6A9E873DB53CDB5AF00691A86B773A9DE4FA809A7E088DC050318C0E2B48D4921FB38BD59A536951268B1E9716E5B4823D91C6A3A8F7A4E4D92A1183BA47CFBF15F4A6D2FC5B2445481244920FCB1FD2BB28BBC4E69AB3392095A9162451C50048A3231480FA13E0AEAA8BAA0B6661F31CA8FE75C156363D1A4EE8FA2E38C3DB023D2B8DEE6C8F3DF88F67BF4CBA0AB979278D571ED5AC5E8268A71AED8ECD3671C8FA551372958DBAC7AADEA9B6072CAFC0F518FE94EE44ACD9AB1D8CD31C470041EB8A7726EAE745A469C20419396EE6A1B3489B9047B47158B66C96867789E10D6E24C72A735B2D8E56ACCA105AC53C40BA82698F7243A65B6DCF96334EE2E53E74FDA7F4F5835ED2EE9140F3217427FDD20FF5AEBA0F439AB2B1E3A07CC735BDCC49E28F2BD39A2E049145FBD03B1A2E267A17852F5B45F125ACAFC2AC8327D8D734D5E275D2972CAC7D77E1EBC8EEF4A8E60C18151C8AF3E4B53B4E6BC589E7451407392EF39C7B74FE75A455819460B7DF3C0A3AA82E3E9C55A3368BC2051AEA32A7CB35AF271DD5BFFAF419D8D6DA91A70295869125B3AE7AD296C69146940430CE6B166A9106A3109AD9C1E84569166552273FA64E6395ADDFAA9AD4C5235B2083CD4D8A6CF9D7F6AB9E3177A342305C79AC7E9F28AEBC39CB55DCF0D55CC981E95D06459B718900A00B280164CE466908ED1E1FB769E6645FDEC380E3BE3D6B9D68ECCE87AAB9ECFF00023C5A6F34E6D1AF25027B718018F2C3B5615A16674529F323B4BA46BBD6AE141F95116207EBC9FE951637E84E96DB7505980C2794221EE7AFF850891CC76EA16AF8C80CEBF4040FF0AAE867327BD9D50134823B19F6170F25DED53F2FA54B36846E74B681C28DDD3BD66F536D1134CC3660511319A396D6545BDD79ABD4D6C8E7218B5989AD8BEE1C0A7B9323E52F8D3E255F1278DA79607DF6D6ABE44441E0E0FCC7F3FE55DB4A3689CB277394B201A4E7D2B425171502B1E4F514008A72700F7A56D4476FA06A0B6F7497000743F2CA9D994F5AC271D0DA9CBA1A9AA2CBE19D5ADF58D2D89B697E789B3C15EEA7DC525EF68CD1FB8EE7B5FC23D76D35ED1CDC24C1AEF7179D09E413DEB9A7171674A95CEC88516CA4766DDFE7F0A941731F50B848678DF7749B3D7B118AB48993B95A699AF6E7CB8C9D83A9A1917B176280DACF1CCAA480307150D5CE8A72B2342F35FB48A3F9D9B701D02D66A0C1CD266643E258A6467456C670322AF92C29CD34616BBAABCBFBE653B41C2A8EA4D689591CD2773CDBE30F885BC39E1736D1CDB351D4B21101E513F89BFA7E35AD18733B99CE56563E7B8BB57758E72F69CB925B3D29319A4541427EB48115C8DAC0F4A019AB6D72F1601E39A8B5D85EC763A36A30DFE8EFA4DEBE6190EE8F3FF2C9FB11EC6B19271773A20D496A57D1F50D53C1DAF24F69318F91B80FBAC3D0D397BE8A4DC19EEBE1BF88163ABDB1DEA639CA8253DFBD733858D5F918DABEB626BCFB32C817612724FE54D10745E10BFB4BC04C13249B4E0E1B38FAD263E5675C1E0F2C9765007726A3529465D0E775CBED1C12AD731E7FD9E6AD26CD6385A92D6C733A8EB9A7D90315AAB5CBE32428E055F2B668B0727B9424D76D6DF487D7756FF47B68816D8793EC3DC9A7CB776471568F24AC8F9B7C75E23BAF157892E756B9CAAB9DB0C79FF5683A0AEC843951C927732205C8C9ED54C11A165F2161D052197E320A01EB408864E587E34017482E0EDC64F3F88A5B087D85DBC12E54E31C8A4D5CA8BB1D5D95DC1A95AAC7703715F979EB584938B3A232E644FA5DC49A15DA34BFBCB72DFBA997B7B1FF000A52F7B61A6E3A33D23488EC75578EED3F7991C8EF59356291D45978634BC89A087C994FF12654FE950D9D34E7CBB960F8626C96695A74ECACE7FC69F31DD0C452B6A8A37BA3C31BE0D9463EBCD5A91ABC4D1B6E541A344373CA06DEC8BD2AF996C716231C9AB411E2FF001EF5899EF2DF44858ADB44BE648A3F898F41F80FE75AD15D4F1EA36F53CA2319635D0D9996A01F29F7A9632E45C0EBD6802EC23299FC07E3400D7C097819C714809E273B88CE08A03612653825786078C5003ECAF1D1B2870D8E47AD292B949D8E86C353F32268A41E6A91F3467AFD4562E36D8DD4D4B435BC39ACCDA05CACB133CF66C72C8A794FA1F5A9946E35EE9EE9E0FF0010D8EA96892C328913A6EC60A9F423B1AE792B6E6F195CE9E473E5831E083D315282466340F2B9693AD5A664D115E5A848998F03142DC891F2BFC64944BE28BA753956930BF41C7F4AECA3B18CD58E1A15CB0ADD99A2F5B4592727815232C632CAA3E9401713E58813C6393400C894E724738EB52D206381C5E903D69AD80B132ED70DD9873EC6926328DE2346CAEBC03FCEA843A0BB2AC0862AC3A11D452B027636B4BD5549DB29404F5247CADF5F43594A0CE884EFB9D5681A83DADCFDAAC2F9ADA7E005F551DBD08AC64BB9B2B1EBFE11F1A4770AB6BAB08E1B9DBBB729F91C7A8AC5C4B3B44B9B5640EAEA4119C834221B398F186BA8911B780E5B1CE3B53336AE7CBDF12EFE2BDD702C48AA224DAC47F11C9E4D76508D918D47D0E6ADD0990115B191A16C02B367180093F4A43160C361BF1A00B0E41403B9A0014608009A405EF11DA7F67789AF2D474867741F407029476262F41D3C60C6CA339F7EC292DCA2A604D1796DD47F2AA4066DCC6D13E7D0F34C408C0F2A70681A342CEE6EA3C3212C0738EF53246B1933A2D3BC55384092939520AB838653EBF5F7AC5D2345556CCEAF4FF1A6A2A5219670B038FF0059DBF1F43EE2A1C2C573265DD575889345BA7926DB22A13BC9E4FBD64936CA5DCF0EBB95AE2E2499CE59CE79AF452B238E4EEEE496C9B559BF0A1924EFF246FEFC5218901217601CB1C5004ECE0CAD839038140D0A5B6F238A00ED3E31D87D8BE226A68176AB4825FC0F359C5E86549FBA6040779473FC439CD1B1A99F79BADE512F6CE08AABDD082EE3DE33FDEE41A2E0CCBDA639369EF5406A694DBA6033826A65B1516695ED86E4F3A150B20FBCB8EA7D2A148BB5CAD652CF048766760FBCADD3F1A6ECC3622D6352796DCDA43232C6DD54F6F6FA538C52776139BB58C4C6D3F30E6B5312CC782A13D4D48F71F7678FC4D003233825FF00BA09A0075A9257245034C9A41B918F7038FC695EC07FFFD9"));
        params.add(new BasicNameValuePair("avatar1", "FFD8FFE000104A46494600010100000100010000FFDB0084000503040404030504040405050506070C08070707070F0B0B090C110F1212110F111113161C1713141A1511111821181A1D1D1F1F1F13172224221E241C1E1F1E010505050706070E08080E1E1411141E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1E1EFFC00011080096009603011100021101031101FFC401A20000010501010101010100000000000000000102030405060708090A0B100002010303020403050504040000017D01020300041105122131410613516107227114328191A1082342B1C11552D1F02433627282090A161718191A25262728292A3435363738393A434445464748494A535455565758595A636465666768696A737475767778797A838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE1E2E3E4E5E6E7E8E9EAF1F2F3F4F5F6F7F8F9FA0100030101010101010101010000000000000102030405060708090A0B1100020102040403040705040400010277000102031104052131061241510761711322328108144291A1B1C109233352F0156272D10A162434E125F11718191A262728292A35363738393A434445464748494A535455565758595A636465666768696A737475767778797A82838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE2E3E4E5E6E7E8E9EAF2F3F4F5F6F7F8F9FAFFDA000C03010002110311003F00F01D3A20C090339A896874411DC784F452D345232755CF4E95CD395CEC8C5247A04BA5AFF615C12A3EE54444F5386689D341B30A005DECA3DCEEAABEA256B1EABE087F334D87FD902B390D3763B4B7C151C548F62E420521B64DEF4589724C465C8A688644E9CD315C88C5C9A10EE35938E9548451BD8F319C8A00E13C576A248A40464628EA0B43E5DF19DB7D93C4B7D06381267F3AF4293BC4E5A8B53214F35A91E44A87248ED4844F1B6E051AA4657D5491612A9EBC7E3C8A24267A678574E6B89A35237722B9AAC8EDA713D83C37A498C27C9CE31D2B96E749D4EA56622D227882F2633C524C2DA1E556D6CFFD89671BE0E2F8804FBB7F8D68B7B99A56D0F40F042180C96849CA3107F3A9608EEAD14E077A436CB88304548898631D6816831E40B4584C6EF56A76336842451604319D707DA9A456C665FCEB822AAC272472BAD3C4627DECA3EA69A447323E64F8B96E21F194EC98D9222B8C575D2D8C66EEEE7207D6B720900E334C2C3C1278EE290C8F5360DA7499E1863F98A4F6158F7CF867601E442C3E6EF5E7D47A9E8C5348F67D12C82C4F2EDE0602D657344AC5CBD80C913F1D066840F63CB2E205B6D298CB81E4EA394CFA6F07FA9AA7A99F537ADF53B6B0F124C1D95039DC49FF003EF549112763A58FC55A645C7DA63E3DE8E533721B2F8E3498D73F6A8CFD0D1C81CE67DC7C48D290B0170091ED4F9039994E3F889A75D4BE5C72FCC7A0F5A7CA2E7674DA46A62E9032B641159B455EE6AF9C36E73DA90EC65EA9A908233F30ABB033C9FC63F119A19DAD34F1BDC705AB4840C252383BFF0010EBFA8EE05A76CF455522B4E58A3377384F16B5DBDE235E890481703CC1838CD6F4ED6D04EE6183C1AD013244FBB48771C3AD01720D4B9B390F7E33F98A4F613D8FA7BE18DBEF78C2E769039AF366F53D4B688F66B1B711C18C56571893464DAC876F5CF14F70B9E05E33D4D926D4ECCA919B9DCBB4F7E39F6E95B4518BD598D3C7AB5CDC6F7F34E428C907BF00D5732219BB65E13D7AE610598F23AB36052E7466E25E83E1FDC3366EAFC0FF006513FC69F3028968F80AC13969667FA9A9736CA512EE9FE0FD361996408D91D2973B2B94EBF47B51061625C0F4A4E570B1A7772F950139C52DCA671BACCAF7AD240AC4023048EA2AAC4B31ED742D0F494FB45C47086EA5A4E49A6A7A99B4AE365F12F8716516F180AC780C62C293F5A1A0E567847C59D4D351F18CFE4E3CB8144631EBDEBAE8AF74C64FA1C88EA6B624963E9EF4C10E1D690CAFA97FC79C87E9FCC527B09EC7D63F0A947D8207C85C0EB5E6CF73D38EC7AF5880F08C0E2B07A162CA11616C81D288BD44CF0CF185B5A2EB723A000CF32963D790E074ADD3325B9A9AF5C69967F6889A44127D906028CE181C8A3C84D68645CFC55D2ECE0548E06924C64FA0FCA9FB39331938A28DBFC59491F75C5BFD954F466819948FA8AA74664FB489D868BE26B7D4E249018991FEE491BEE46FEA0FB1ACDAB1BC55F5362094C926D1D2914968745A65BE50B01CE29751F2D8CBF1333C5113C8AA4436709AFEAF1E8BA5CD7D22EEDBF7467966EC07BD5A8B64CB63CF3C3D737DE31F16DAD96A5793C76F781B0B0BEDD9E993DEBA7D9C628E394DEAC4F887E0D8FC3BA9C69A6DCDCB6E639DEF9C62A5495EC6949C9C798F26BD2AF70EFF003172C4B13DCD74448656EF542B92274E6982448BD47B52195F5218B4907D3F98A4F6133EA8F8532AB69B1A67EE9C62BCC96E7A715A1ECDA79FF451C76AC25B9A153559CC50313D31D6AA22B1E07F10AE259350B61685964762C09E39CF15B41193BDF431B50D275AB83BF5385FC810B388E1720CD8E9B8F53CF35A45A44CE126B4DCE3230B0EA78916100AB165978C6074E6BA62D238A709753D43E16E8DA76ADE0975D4ED958095D6190F0C17FD93E99A894CCF9249E856D3B4D5D0FC55B6D9DFEC52B888A8E46E3D0E3FAD61395D1EB52A6B9753D6343B27F3097E9D0564163AFD3E20B1E31593DC728DD189E30B7DCABC704D6D17A185B53CE7C7DE104F12C5656EFA83D9430317211376F6E95519B88F9548A9E19F04DA787F558F548F509AFEE2242910900511E7B8C568EAB68895085AC58F12698F7CCB2DC481DCBE55476FC6A39876518F2A3E6DF11D9B586BB7D68C0E629DD79F4CF15DF0774723DCCF0A739AA10F51EB408900C1A4320D507FA0B9FA7F3149EC27B1F43FC2BBF097A6DF77CA5F77E15C138D8F4A9BBA3E88D2903DB291D315CB2352A78862C69F707B843834447D0F29F1569D1278B74E89917020DC78CF35BDC8372EADE17BD8C32AF116063D0E0D48CE6D740D2E6F105EADC5BC326F559409220D8EC71F955A9B2271B9BD1E9B67040B0C44244A301106D03F0A2E67CB626B1B3DF3058A1047A91436689B3AED36D3CB400F5EF50D948D8B750B8AC5B356B4287892DC4966CC3F879AD96C724B73060B48EE220AC334CA10E88A5B8E29A626DA19268888379F9B14EE4EA7CB7F1B34F161F116F940C095525FCC7FF5ABBA93F74E59AB338AC65B0056840F44CB628B80F68E8B8106A699D2A66F4DBFFA10A4C967A778435292CB55825270030C9F6AE69ABA3B68CBA1F59F842E56E34B89C107815C1347616F5E03ECC10E3323AA81F8D4C4679DF88ADD25F17B3B65BCA8D541EC33C9ADD6A4C912B41BB51B638C011919F6CD162189368EABE21B762C02CF03A8FA839A6EE66E46BDB68F1F058934B616ACD282D62830A8A051B9691A3028E07151235896D179E2B365DC87508C3C2CA7B8AD22F4309C7A9CDE9F88A6689B82A715A233E635D5463348A5A8CB95CC471D314D0EE7CB7FB4A4023F1CDBC9C7CF66B9FC18D7650D8E3AA7951FBE3D49AD8C89A2E1B38A432D2A02ABC6327A53029EB0BB749B8F7DBFFA10A4C867737D035BC8B2C790870C31DAB14EE8E96B95DCFA2BE087885351D1614661BD3E4619EF5C556276C25CC8F44D49D5DD09E919DD59C516710E3ED128B91F3196E5B91DD7A7F4AD189966D2156D42788F261500FB673544B458D4109BBD2E7CE0C73146F70CA47F4A0CF635C2EC1B4FE1402B103CA15F9FC0D05F42D5B4E0F422A248B468C2E0AE7159334B03AEE4626AA244D1CAEB31B5BDE09946031E6B64CE76B52F59DC078C73CD3B0C9AE24510924F6A44499F27FED197E973F104C48C0FD9AD911BD8924E3F5AECA2AD139A679C01BA55FCEB5209CA1042E39278A60595C808738C122811535C38D26E54F7DBFF00A10A9B83D8F46D3D0EA16B25AEDFDFC6BB907F7B1D4560F46742F791A3F0E75F9BC37E248C3B94B59D82BE7A2FA1FC28A914D5D154E7CAEC7D2579A946FA149791387223C2E0F56238AE448EC4CA3A3DA04B7B7DD9FDD201F89EA69832C5BC0CB7D34EC306E0F1F870284219A96762B2824ADC46DC7D79FE7548CE4694D28F2F27D28262B531AFEE4F280D266A8B7A26F923E0922A1BB1BC228DF8159705BEED66F529BEC4AEC08201A226735631B5A883DB9638E2B64734B739C1A88B695518E0374AAB8B721F13F892D34BD167D42EA5090C3196639FD29C5733329EC7C79E21D567D6B5BBDD5273FBDBA94C87D8761F962BBE31B46C7337721B6E64519FF38A60997D9572A71DE806249B428FCE9014B5BE74AB83FEE9FF00C78504BD8EFB4EB978664B980E1D0827158C9686D07A9BDE26D320BDD3A3D76C147952F13AAFFCB393D7E86A22ECAC6B28F546C7803C5D24ED67A0EA3294512A92E4E3207DDFFEBD45485B535A53BE87BEC6816CDC8C1046411DFD2B0B9AA64B72810458E421C1FA1A1018FAC12B04FB4F21D5971EC455A264C6DFDF2F92194F2D4F633D882C6D9A506493A9ED52CA8BD4D1D0E6169298DF8E4E33D0FF00F5EB39267527A1AB77A9DB46A59A745FC6A145B2399266647AF5AC8CDE5CAAC07520D5A8D87295D19DAB6B2258CC50F24F7F4AD1239A72395B993ED732DA424B386F98FF00769B328BD6E78D7ED01E25696F53C316B29314187BA20F57ECBF875AEAA14EDAB33A923CAD2BA4C4B564A59FE9498CD5419C67078A9111CEB838F6A6519BAD6469738FF77FF4214990F63A8B1B908300F1DB3E950F5655EC765E0DD6E3B7792DAE504B6570BB278CF607BFE1594E363A213E6D0C6F136932E95AA99219199061E1907753D0E6AE32525660E2E3B1EB7F093E2425CDBC5A26B270C83F77313F7BD8D7355859E86D1973A3D516EE19EDD9964520654F3598EE727ADEA6AB132193E72C5081EBFF00D715489BDC8B4798DD08DA53DB81E94D93A9D8D8C4BE58A86C6B4269ECD1D4E4524CBE7673FAAE99C31504D59176CCB82CD2D236F330809CE4D37A94D36539AFAD77F9304A924A7A053935495899424B5661F8CFC436BE0BF0A5CEA4C55AFEE014B65EED21FE83AD10873331948F972EEE26BAB996EAE5CC934AE5E472792C4E4D77C55918362C609C76A6C65DB101246F7A919A30FDE38A04120CFCDD7271F4A00CAD707FC4B6727D47FE8429099B85368217F87E61EE2848659D3AEDE19415620FB7A52946E541D99D8E997D15E590B3B960548C231E767B7D2B9DC5A3A632E631AE6CE6D366332A9316EDA71D8FD6AEE992EF0773D03C15E23BD28B14B70F24128C06CF218763EF8AC271B1ADD35735352FB5C9A824B136E563DC702A495A96AD7FE125B6BD12DBDB433C1F7BCB276B13DF068348451D75BF8A24820513E97731BF75256A796E74C30AE6F7257F13EA570BB6CB4B61C7DE7614F90DD6092DCC5BEBFF00114EE49F2D0FBBE2B44923A5508456C626AADA8DE4AB1DCDCBED518F2E33D6AD47A8FD9460AED0CD3ED20D123BAD4AF1BCA5D9BDCB1CED4152D5F43C8C655537647CFBF107C5177E29D764BC998881094B78BB227F89EF5D74E0A28F3652E6673A012BC55925A887EEE90CB50603E7A64629017212724FBD0048CA4EDEBC0C9FAD0065EB6BFF00128B827B6DFF00D085213D8DC4C1C13FC3FCA8617D0866531C9F27214E54FA8A10D172CAF1E2659233F2E7A5271B9499D658DFC1347FBC02459060AE7871FE3FCAB9DA71674269A23749B4A7177A7C8D25ABF0EA7A8F623D47AD1A4B717C2CEFFC21E20B5D560512B8DE9804F71F5ACE4AC52773D1F495CC7C85704566CD60BA9A62CADA7016584303EA2A6F63685594761936916889989CC7F8D5266EB1D25B98B7766A25C7985FD6AEEC72CC591259C3165963F98F734F9EE7156C4D4ABB9E71F1C2EA487C30F6A8769BA7D87FDD1C9FE95A53F88E3933E7697EF102BB0C761D18F9281A2D463E4C7B54B045955C206C75A00B56C3730CF426802591B11B30C02CD81F4A4C6F732F5CFF009044E474CAFF00E84295D12F635A36C4854F6E7EB4C648D81B7F4F7A065662D0CC48FBADD476A622E5ADCB28CA1F94F2573C1A868A52E53734DD499519A2258B0C4919E4E3D7DFEB59389BA9A9162DA492CAE5351D32529281960A383EB91DC7B526AFB85ADB1EABF0F7C676D7E91DB102DAF075818FCAFEE84FFE83D45612858D6333D42C6EE39D06D203119C1ACCD44BB12B0217F4A68891512DCFF1019ABB99D826B5F97711818A9224788FC7C951DA08909C42ACCDE993C01FA56F4BE22396E8F046E6427DEBB52D0C19340990463B52632DDAC6304E738A422673C607F0F140CB56AA541C1EC00A0049402EAAA7EED03296BC0FF624DC63EEFF00E842A4996C5D9CEDB96E72334D0172542D06E1D5790695F52882555957A800F3F4AA11495DA394E78E7069016E1B921B7AB14753D41E45161A76D8D8D37520CE376C49BD7F85FF00C2B29419BC277372D963B8748E3DB036FCB297DB83D883FD6B27E66B65D0EFFC27E31D534C6583545FB5DA838331E1E3F663FC89FCCD64E2BA1A6A7AB693A9D9EA102C904A1830E013CD46C22F8F287391C534498DE24D561B5B5601B9C7E34EC66CF04F8B5A9DB9D3AE84B16FB995D3CB63FF002CD46738F73C0AD68C5B7725BB23C6F1DEBB59CC59B453B09F7A00BB66BC1E3B7348624603FE27767D2802DC7D319E83268023006ECE7B6680296BF9FEC79C13FDDC7FDF429313D8D4D6ED5ECB569ED655F9E294C6E3DC1C7F4A51D5027745B88332AE3906931DCAC0EC9F1C6D3D3EB4C0AD7D07CE5D47D71E9EB54052CB23ED34012ABB272A4E290D3B17ED3529225556CB053C7B54CA28D2352C74FA1788C43912B1285766EEA557D08FE2158CA1D8DA333AAD17C4ABA748925A49BEDCF58D64398FFEB993DBFD93F8566E0697BEC75F6DF1063B888C71BB48E0603EDC7FDF40F434AD622C57975092FD4CF7127232768ED59DC2C788FC44D464BBD5DE161B76361864F6E991EB5DB4569731ACFA1CB2AF3902B6302F4236AA8C724134302419481C83C918A4312D303EF670319A009F762D871CC9FCA8017B67207140DA28EBE71A44E3FDD1FF008F0A4C97B1DBFC59B46B5F881ABA38C7FA4B483E84E47F3A986C45377898D6A7FD122209CE003EDDE93B9AD865EC7F2AB8E32322AD088ADDC4B110482C0608F5F4A18142F21F9411918A6C0AD1B9562B9A00B76FB73938C1EA281A2FBD8B3AF9B6FC38E76F4ACD3346AE84B5BA9609323EF0E194F00D369315DA36B4CBF0D7026B77F22E40E558E5587A7F9E6B3944B4CD9FF8490416F33BE6160A4BA7FF0013F5ACD52D4D7992573CD2F6792EEEE4B87237C8DB88F4AEB8AE54724DDE571914673CF5269925C51FBD503FBA7F4148065C604617E9FF00D7A063380A40CF340134CC4CDE583C20DB40D12A0EBF4C521B33BC4071A6CDE876FF00E842821EC775F18BC5BE12D77C632EA1A2EADF69B69A35DCE2DA54C1EE30CA0D6714D233A778AB3393B6D7B4B50E1EE8019F94796DD3F2AA35E625935FD19E155377CAF6F2DFFC292B8AE8CF5D5F4D4BD0CB71FBB3C1211BA7E5541744B2EB1A5374BA2411CFEEDBFC280BA33E5D42C43031CF9E7FB87A7E54EE1744916AB62873E7F1FEE1FF000A2E1746E59788B458D14BDE723E523CA7E47E55934CB534477FACE832B79915F0F3077F29F91E9D29AB95CF12AC5AC692B97FB5E18745D8FF00A1C556A2E78915FEBF6D70021B8DCA3BEC3CFE94D68294D7428B5FD88E566C67B6D3C7E957CC4362C7A9D98624CBEE3E53FE149B0BA278B56B104B35C60E0E3E46FF000A5704D0CB8D52C5882B3E703FB8DFE1405D045A9D88752D3F00E7EE37F85170BA1A9A9D99959DA7C64FF75BFC280E6459FED8D3B24FDA7A8FEE37F850372453D6B51B3B8B068A19F7360606D239C8F51484DAB1FFD9"));
        HttpUtil.post(url, params, cookieStore)

    }

    def updateInfo(Discuz discuz) {
        checkLogin(discuz)
        def cookieStore = SerializeUtil.readCookies(discuz.url, discuz.username)
        def context = new ParamsStrategiesContext()
        def params = context.getUpdateInfo(getFormHash(discuz), "vpn加q群：516050449免费试用.", "高速独享vpn厉害了，Youtube高清视频不卡，上Facebook，Twitter，Google不限制，加q群：516050449免费试用.")
        HttpUtil.post("${discuz.url}/home.php?mod=spacecp&ac=profile&op=info", params, cookieStore)
    }
}
